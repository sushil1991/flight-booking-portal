<div [formGroup]="filterForm" class="main-wrapper">
  @if (flights.length) {
    <div class="filters">
      <app-flight-filters
        [airlines]="airlines"
        (airlineChange)="onCheckboxToggle($event.airline, $event.checked)"
        [flights]="flights"
        (timeSlotChange)="onDepartureTimeSlotChange($event)"
      >
      </app-flight-filters>
      <mat-card appearance="outlined">
        <div class="filter-group">
          <label>Duration</label>
          <mat-select
            formControlName="durationSlot"
            (selectionChange)="onDurationSelectionChange($event)"
          >
            <mat-option value="">Any</mat-option>
            <mat-option value="short">&lt;= 4 hours</mat-option>
            <mat-option value="medium">4â€“8 hours</mat-option>
            <mat-option value="long">&gt; 8 hours</mat-option>
          </mat-select>
        </div>
      </mat-card>
      <mat-card appearance="outlined">
        <div class="filter-group">
          <label>Sort by</label>
          <mat-select formControlName="sortBy" (selectionChange)="onPriceSelectionChange($event)">
            <mat-option value="price">Price</mat-option>
            <mat-option value="duration">Duration</mat-option>
          </mat-select>
        </div>
      </mat-card>
    </div>
  }
  @if (filteredFlights.length === 0) {
    <div class="no-results">No flights found. Try another search.</div>
  }

  <div class="results-container">
    @for (item of filteredFlights; track $index) {
      <app-flight-card [flight]="item" (bookFlight)="onflightBooking($event)"></app-flight-card>
    }
  </div>
</div>
